<div class="venda-read-container">
  <!-- Campo de busca por CPF -->
  <mat-card class="mb-4 busca-cpf">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Buscar vendas por CPF</mat-label>
      <input
        matInput
        [(ngModel)]="cpfBusca"
        (keyup.enter)="filtrarPorCpf()"
        placeholder="Digite o CPF do cliente (somente números)"
      />
      <button
        mat-icon-button
        *ngIf="cpfBusca"
        matSuffix
        aria-label="Limpar busca"
        (click)="limparBusca()"
      >
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
  </mat-card>

  <!-- Botão para exibir/ocultar formulário -->
  <div class="text-end mb-3">
    <button mat-raised-button color="primary" (click)="mostrarFormulario = !mostrarFormulario">
      {{ mostrarFormulario ? 'Fechar formulário' : 'Nova Venda' }}
    </button>
  </div>

  <!-- Formulário de nova venda -->
  <app-venda-create
    *ngIf="mostrarFormulario"
    (vendaCriada)="onVendaCriada()"
  ></app-venda-create>

  <!-- Lista de vendas filtradas -->
  <mat-card *ngFor="let venda of vendasFiltradas" class="mb-2">
    <mat-card-title>Venda ID #{{ venda.id }}</mat-card-title>
    <mat-card-subtitle>
      Cliente: {{ getClienteNome(venda.cliId) }}<br />
      Data: {{ venda.vendaData | date:'dd/MM/yyyy' }}<br />
      Total: {{ venda.vendaValorTotal | currency:'BRL' }}
    </mat-card-subtitle>
  </mat-card>
</div>
